import csv
import os
import random
import math
import sys


# print("\n*********************************************************************************");
# print("frequency.py")
# sys.stdout.write("Directory ")
# print(os.getcwd())
# print("Created by Brock Tubre on 11/07/14 -- CSC475")
# print("*********************************************************************************\n");


# 2d array to store trasition frequencies
values = []
weights = [0.01 for x in range(256*256)]
transitions = [[0 for x in range(256)] for x in range(256)]
bias = 1
alpha = 0.01

# Reads in CSV file and stores input values
def FrequencyFunc(input):
	original = open('output.csv', 'rU')
	reader = csv.reader(original)
	for row in reader:
		values = row

	# re initialize transitions list
	transitions = [[0 for x in range(256)] for x in range(256)]

	for i in range(len(values)):
		if(int(values[i]) > 0 and int(values[i+1]) > 0):
			first = int(values[i])
			second = int(values[i+1])
			transitions[first][second] += 1

	return transitions

def LearningFunc(csvfile):
	trans = FrequencyFunc(csvfile)
	hyp = Hypothesis(trans)

	error = trans[255][255] - hyp

	k = 0
	for i in range(255):
		for j in range(255):
			weights[i] = weights[i] + alpha * error * trans[i][j]
			k += 1

	weights[256*256-1] = weights[256*256-1] + alpha * error * bias				

def Hypothesis(trans):
	k = 0
	summer = 0
	for i in range(255):
		for j in range(255):
			summer += weights[k] * trans[i][j]
			k += 1

	summer += bias * weights[256*256-1]
	print(summer)

	if(summer > 1):
		return 1
	else:
		return 0

LearningFunc(0)



# def PrintCSV(T):			
# 	# prints the frequencies of each transition
# 	for j in range(256):
# 		for k in range(256):
# 			count = T[j][k]
# 			if(count != 0):
# 				#sys.stdout.write("%s, %s, %s \n" % (j, k, count))
# 				sys.stdout.write("%s, %s, %s \n" % (j, k, count))



# PrintCSV(FrequencyFunc())		













